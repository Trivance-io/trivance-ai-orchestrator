# ðŸš€ Trivance Platform - Workspace Multi-Repo

**Workspace completo** para desarrollo de Trivance Platform con **gestiÃ³n automÃ¡tica de environments** y **arquitectura hÃ­brida Docker + PM2**.

[![Docker](https://img.shields.io/badge/Docker-Required-blue.svg)](https://www.docker.com/)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.3+-blue.svg)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/License-Private-red.svg)]()

> **ðŸŽ¯ Generado automÃ¡ticamente** desde [trivance-dev-config](./trivance-dev-config/README.md) â€¢ **ConfiguraciÃ³n centralizada y sincronizada**

## ðŸ—ï¸ Estructura del Workspace Completo

```
ðŸ“ Trivance Platform/                    # ðŸ“ Workspace principal auto-creado
â”œâ”€â”€ CLAUDE.md                           # ðŸ¤– ConfiguraciÃ³n Claude Code (auto-generado)
â”œâ”€â”€ README.md                           # ðŸ“– Este archivo (auto-generado)
â”œâ”€â”€ start.sh                            # ðŸš€ Comando principal (enlace simbÃ³lico)
â”œâ”€â”€ TrivancePlatform.code-workspace     # ðŸ’» VS Code workspace (auto-configurado)
â”œâ”€â”€ .gitignore                          # ðŸš« Git ignore maestro (auto-creado)
â”œâ”€â”€ ecosystem.config.js                 # âš™ï¸ PM2 config hÃ­brido (auto-generado)
â”œâ”€â”€ envs/                               # ðŸ” Configuraciones por environment
â”‚   â”œâ”€â”€ .current_environment           # ðŸ“ Environment actual
â”‚   â”œâ”€â”€ ENVIRONMENTS.md                 # ðŸ“š GuÃ­a completa
â”‚   â””â”€â”€ *.env                           # ðŸ”’ Archivos de configuraciÃ³n
â”œâ”€â”€ logs/                               # ðŸ“Š Logs de PM2
â”œâ”€â”€ .trivance-secrets                   # ðŸ”‘ Secrets generados (NO en git)
â”œâ”€â”€ ðŸ”§ trivance-dev-config/             # REPO: Configuraciones maestras
â”œâ”€â”€ ðŸŒ level_up_backoffice/             # REPO: Frontend Admin (React + Vite) - PM2
â”œâ”€â”€ ðŸš€ ms_level_up_management/          # REPO: API Backend (NestJS + GraphQL) - Docker  
â”œâ”€â”€ ðŸ” ms_trivance_auth/                # REPO: Auth Service (NestJS) - Docker
â””â”€â”€ ðŸ“± trivance-mobile/                 # REPO: Mobile App (React Native + Expo)
```

## ðŸ³ Arquitectura HÃ­brida Inteligente

### âš¡ Modo HÃ­brido: Lo Mejor de Ambos Mundos

- **ðŸ—„ï¸ Bases de Datos**: PostgreSQL y MongoDB en Docker (aislamiento y consistencia)
- **ðŸš€ APIs Backend**: NestJS en contenedores Docker (configuraciÃ³n idÃ©ntica en todos los environments)
- **ðŸŒ Frontend**: React con PM2 para hot-reload instantÃ¡neo (desarrollo Ã¡gil)
- **ðŸ“± Mobile**: Expo con conexiÃ³n automÃ¡tica a APIs Docker locales

### ðŸ”„ Flujo de Datos Optimizado
```
[Mobile App] â†â†’ [Auth Docker:3001] â†â†’ [MongoDB Docker:27017]
      â†“               â†“
[Frontend PM2:5173] â†â†’ [Management API Docker:3000] â†â†’ [PostgreSQL Docker:5432]
```

### ðŸŽ¯ Beneficios de la Arquitectura
- âœ… **Development Speed**: Hot-reload para frontend + APIs estables en Docker
- âœ… **Environment Parity**: Backends idÃ©nticos en local, QA y production
- âœ… **Database Consistency**: Mismas versiones y configuraciones en Docker
- âœ… **Zero Config**: Todo funciona automÃ¡ticamente al ejecutar `./start.sh`

## âš¡ QUICK START (5 minutos)

### 1ï¸âƒ£ **Setup Inicial (Ya Hecho)**
```bash
# âœ… Ya realizado automÃ¡ticamente durante la configuraciÃ³n inicial
# El workspace estÃ¡ 100% configurado y listo para usar
echo "ðŸŽ‰ Setup completo - workspace listo para desarrollo"
```

### 2ï¸âƒ£ **Iniciar Servicios**
```bash
# ðŸŽ® Comando principal - menÃº interactivo inteligente
./start.sh

# âš¡ Iniciar desarrollo con hot-reload â‰¤2s (ESTÃNDAR)
./start.sh start

# ðŸ“Š Ver estado actual
./start.sh status

# ðŸ›‘ Detener todos los servicios
./start.sh stop
```

### 3ï¸âƒ£ **Â¡Listo! URLs de Desarrollo**

| Servicio | URL | Tipo | DescripciÃ³n |
|----------|-----|------|-------------|
| **ðŸŒ Frontend Admin** | http://localhost:5173 | PM2 | Panel administrativo con hot-reload |
| **ðŸš€ Management API** | http://localhost:3000 | Docker | API principal con GraphQL |
| **ðŸ” Auth Service** | http://localhost:3001 | Docker | Servicio de autenticaciÃ³n |
| **ðŸ“Š GraphQL Playground** | http://localhost:3000/graphql | Docker | Explorador interactivo GraphQL |
| **ðŸ“– Auth API Docs** | http://localhost:3001/api-docs | Docker | DocumentaciÃ³n Swagger |
| **ðŸ” Log Viewer** | **http://localhost:4000** | **Docker** | **Sistema de observabilidad unificado** |
| **ðŸ“Š Dozzle Logs** | http://localhost:9999 | Docker | Monitor de logs Docker en tiempo real |
| **ðŸ—„ï¸ PostgreSQL** | localhost:5432 | Docker | Base de datos principal |
| **ðŸ—„ï¸ MongoDB** | localhost:27017 | Docker | Base de datos auth |

### 4ï¸âƒ£ **Mobile App**
```bash
cd trivance-mobile

# ðŸ³ Para desarrollo con Docker local (recomendado)
npm run start:docker    # Se conecta automÃ¡ticamente a APIs Docker

# ðŸ§ª Para desarrollo con QA
npm run start:qa        # Se conecta a servicios remotos de QA
```

## ðŸŽ›ï¸ GESTIÃ“N DE ENVIRONMENTS

### ðŸŽ¯ Importante: Desarrollo vs QA/ProducciÃ³n

- **Desarrollo Local**: SIEMPRE usa Docker con hot-reload â‰¤2s (estÃ¡ndar por defecto)
- **QA/ProducciÃ³n**: Requiere proceso diferente con imÃ¡genes optimizadas (no hot-reload)

### Cambiar Environment en UN Comando
```bash
# ðŸ  Desarrollo local (99% del tiempo)
./trivance-dev-config/scripts/envs.sh switch local

# ðŸ§ª Testing en QA
./trivance-dev-config/scripts/envs.sh switch qa

# ðŸš€ Production (con confirmaciÃ³n de seguridad)
./trivance-dev-config/scripts/envs.sh switch production
```

### Ver Estado Completo del Sistema
```bash
# ðŸ“Š Status completo con validaciones
./trivance-dev-config/scripts/envs.sh status

# â“ Ver todos los comandos disponibles
./trivance-dev-config/scripts/envs.sh help

# ðŸ” Validar configuraciÃ³n actual
./trivance-dev-config/scripts/envs.sh validate
```

### ðŸ”„ Auto-GeneraciÃ³n de Archivos

El sistema genera automÃ¡ticamente:
- âœ… **Archivos .env** para todos los repositorios
- âœ… **ecosystem.config.js** para PM2 hÃ­brido
- âœ… **env.local.ts** para mobile app (TypeScript)
- âœ… **Configuraciones Docker** especÃ­ficas por environment

## ðŸŽ® Comando Principal: ./start.sh

### MenÃº Interactivo
```bash
./start.sh  # Muestra menÃº con detecciÃ³n automÃ¡tica
```

**Opciones disponibles:**
- ðŸš€ **Iniciar desarrollo** - Docker + hot-reload â‰¤2s (ESTÃNDAR)
- ðŸ“Š **Ver estado** - Servicios, puertos y health checks
- ðŸ”„ **Cambiar environment** - Local, QA, Production
- ðŸ›‘ **Detener servicios** - Cleanup completo
- ðŸ” **Verificar salud** - Validaciones end-to-end
- ðŸ³ **GestiÃ³n Docker** - Logs, rebuild, reset DBs
- ðŸ—‘ï¸ **Limpiar workspace** - Reset completo

### Comandos Directos
```bash
./start.sh start   # ðŸš€ Iniciar desarrollo (Docker + hot-reload â‰¤2s)
./start.sh stop    # ðŸ›‘ Detener todos los servicios
./start.sh status  # ðŸ“Š Ver estado del sistema
./start.sh setup   # ðŸ”§ Reconfigurar desde cero
```

**âš¡ IMPORTANTE**: El modo desarrollo con hot-reload â‰¤2s es el ESTÃNDAR por defecto.

## ðŸ“š DOCUMENTACIÃ“N COMPLETA

### ðŸ“– DocumentaciÃ³n Principal
- **ðŸ—ï¸ [CLAUDE.md](CLAUDE.md)** - ConfiguraciÃ³n completa para Claude Code
- **ðŸŽ›ï¸ [ENVIRONMENTS.md](envs/ENVIRONMENTS.md)** - GuÃ­a completa de environments
- **ðŸ”§ [trivance-dev-config](trivance-dev-config/README.md)** - Setup y configuraciÃ³n maestra

### ðŸ“ Por Repositorio
- **ðŸŒ [Frontend Admin](level_up_backoffice/README.md)** - Panel administrativo React
- **ðŸš€ [Management API](ms_level_up_management/README.md)** - Backend principal NestJS + GraphQL
- **ðŸ” [Auth Service](ms_trivance_auth/README.md)** - Microservicio de autenticaciÃ³n
- **ðŸ“± [Mobile App](trivance-mobile/README.md)** - AplicaciÃ³n React Native + Expo

### ðŸ› ï¸ DocumentaciÃ³n TÃ©cnica
| Documento | DescripciÃ³n |
|-----------|-------------|
| [DOCKER.md](trivance-dev-config/docs/DOCKER.md) | Arquitectura Docker e integraciÃ³n hÃ­brida |
| [COMMANDS.md](trivance-dev-config/docs/COMMANDS.md) | Todos los comandos y scripts disponibles |
| [TROUBLESHOOTING.md](trivance-dev-config/docs/TROUBLESHOOTING.md) | SoluciÃ³n de problemas comunes |
| [ONBOARDING.md](trivance-dev-config/docs/ONBOARDING.md) | GuÃ­a para nuevos desarrolladores |
| [WORKFLOWS.md](trivance-dev-config/docs/WORKFLOWS.md) | MetodologÃ­as y procesos del equipo |

## ðŸ†˜ COMANDOS DE EMERGENCIA

### ðŸ”§ SoluciÃ³n RÃ¡pida de Problemas
```bash
# ðŸ›‘ Parar todo y limpiar
./start.sh stop
docker system prune -f

# ðŸ”„ Reset completo a configuraciÃ³n local
./trivance-dev-config/scripts/envs.sh switch local

# ðŸš€ Reiniciar todo desde cero
./start.sh setup

# ðŸ” Verificar que todo funciona
./start.sh status
```

### ðŸ³ Comandos Docker EspecÃ­ficos
```bash
# Ver estado de contenedores
docker ps

# Ver logs de servicios especÃ­ficos
docker logs trivance_auth           # Auth service
docker logs trivance_management     # Management API
docker logs trivance_postgres       # PostgreSQL
docker logs trivance_mongodb        # MongoDB

# Reconstruir imÃ¡genes
cd trivance-dev-config/docker
docker compose build --no-cache

# Reset completo de bases de datos (âš ï¸ DESTRUCTIVO)
docker compose down -v
docker compose up -d postgres mongodb
```

### ðŸ“Š Comandos PM2 (Frontend)
```bash
# Estado de servicios PM2
pm2 status

# Logs en tiempo real
pm2 logs backoffice

# Reiniciar frontend
pm2 restart backoffice

# Monitor interactivo
pm2 monit
```

## ðŸ”’ Seguridad y Secrets

### ðŸ”‘ GestiÃ³n AutomÃ¡tica de Secrets
- âœ… **Secrets Ãºnicos** generados automÃ¡ticamente para cada instalaciÃ³n
- âœ… **No hardcoded credentials** en ningÃºn archivo del repositorio
- âœ… **Archivo `.trivance-secrets`** excluido de Git automÃ¡ticamente
- âœ… **RotaciÃ³n segura** de secrets con un comando

### ðŸ›¡ï¸ Verificaciones de Seguridad
```bash
# El sistema previene automÃ¡ticamente:
# - EjecuciÃ³n en entornos de producciÃ³n sin confirmaciÃ³n
# - Uso de secrets por defecto en environments crÃ­ticos
# - ExposiciÃ³n accidental de credenciales en logs
```

## ðŸŽ¯ Para Desarrolladores

### ðŸ†• Nuevo en el Proyecto
1. **Empezar aquÃ­**: [ONBOARDING.md](trivance-dev-config/docs/ONBOARDING.md)
2. **Configurar Claude**: Revisar [CLAUDE.md](CLAUDE.md)
3. **Entender flujos**: [WORKFLOWS.md](trivance-dev-config/docs/WORKFLOWS.md)

### ðŸ‘¨â€ðŸ’» Desarrollador Experimentado
1. **Comandos rÃ¡pidos**: [COMMANDS.md](trivance-dev-config/docs/COMMANDS.md)
2. **Arquitectura Docker**: [DOCKER.md](trivance-dev-config/docs/DOCKER.md)
3. **Troubleshooting**: [TROUBLESHOOTING.md](trivance-dev-config/docs/TROUBLESHOOTING.md)

### ðŸš€ DevOps y Deploy
1. **Environments**: [ENVIRONMENTS.md](envs/ENVIRONMENTS.md)
2. **Procesos**: [WORKFLOWS.md](trivance-dev-config/docs/WORKFLOWS.md)
3. **Monitoreo**: Scripts de validaciÃ³n automÃ¡tica

## ðŸ”— Enlaces y Recursos

### ðŸŒ Repositorios del Ecosistema
- **[GLab-Projects/trivance-dev-config](https://github.com/GLab-Projects/trivance-dev-config)** - Configuraciones maestras
- **[GLab-Projects/ms_level_up_management](https://github.com/GLab-Projects/ms_level_up_management)** - API principal
- **[GLab-Projects/ms_trivance_auth](https://github.com/GLab-Projects/ms_trivance_auth)** - Servicio de auth
- **[GLab-Projects/level_up_backoffice](https://github.com/GLab-Projects/level_up_backoffice)** - Frontend admin
- **[GLab-Projects/trivance-mobile](https://github.com/GLab-Projects/trivance-mobile)** - App mÃ³vil

### ðŸ“ž Soporte y EscalaciÃ³n
- **ðŸ“ Issues**: Usar GitHub Issues en el repo correspondiente
- **ðŸ’¬ Slack**: Canal #dev-support para consultas rÃ¡pidas
- **ðŸ“– Docs**: DocumentaciÃ³n completa en cada repositorio
- **ðŸ†˜ Emergencias**: Contactar al tech lead directamente

---

## ðŸ¤– ConfiguraciÃ³n AutomÃ¡tica

> **âš¡ Auto-Sincronizado**: Este archivo se actualiza automÃ¡ticamente desde `trivance-dev-config/templates/README.md.template`

**ðŸ”„ Ãšltima sincronizaciÃ³n**: $(date '+%Y-%m-%d %H:%M:%S')  
**ðŸ“¦ Fuente de verdad**: [trivance-dev-config](trivance-dev-config/README.md)  
**ðŸ¤– Optimizado para**: Claude Code + VS Code + GitHub Codespaces

### Para actualizar este README:
1. Editar: `trivance-dev-config/templates/README.md.template`
2. Ejecutar: `./trivance-dev-config/setup.sh`
3. Resultado: README.md actualizado automÃ¡ticamente

---

**Ãšltima actualizaciÃ³n**: Enero 2025 â€¢ **Mantenido por**: G-Lab Development Team

*Parte del ecosistema Trivance Platform - Moderno, escalable y optimizado para desarrollo Ã¡gil.*
# ğŸ¤– CLAUDE.md - ConfiguraciÃ³n Maestra Claude Code para Trivance Platform

## ğŸŒŸ WORKSPACE AUTO-CONFIGURADO DESDE TRIVANCE-DEV-CONFIG

**Este archivo fue generado automÃ¡ticamente por el script de setup de trivance-dev-config**


Claude Code debe operar en espaÃ±ol:
- âœ… **Todas las respuestas en espaÃ±ol**
- âœ… **DocumentaciÃ³n generada en espaÃ±ol**
- âœ… **Comentarios de cÃ³digo en espaÃ±ol**
- âœ… **Mensajes de error en espaÃ±ol**
- âœ… **Commits sugeridos en espaÃ±ol**
- âœ… **Explicaciones tÃ©cnicas en espaÃ±ol**
- âš ï¸ **CÃ³digo en inglÃ©s** (variables, funciones - estÃ¡ndar internacional)

## ğŸ—ï¸ WORKSPACE MULTI-REPO COMPLETO

Este workspace fue configurado automÃ¡ticamente desde el repositorio `trivance-dev-config`. 
Estructura completa creada:

```
Trivance-platform/                    # ğŸ“ Workspace principal auto-creado
â”œâ”€â”€ CLAUDE.md                         # â† ESTE ARCHIVO (auto-generado)
â”œâ”€â”€ README.md                         # DocumentaciÃ³n principal (auto-generado)
â”œâ”€â”€ TrivancePlatform.code-workspace   # VS Code multi-repo (auto-configurado)
â”œâ”€â”€ .gitignore                        # Git ignore maestro (auto-creado)
â”œâ”€â”€ scripts/                          # Scripts de automatizaciÃ³n (copiados)
â”œâ”€â”€ trivance-dev-config/              # ğŸ”§ REPO DE CONFIGURACIONES (clonado)
â”‚   â”œâ”€â”€ .claude/                      # âš™ï¸ ConfiguraciÃ³n Claude Code
â”‚   â”‚   â”œâ”€â”€ settings.json             # Settings principales Claude
â”‚   â”‚   â”œâ”€â”€ context.md                # Contexto tÃ©cnico detallado
â”‚   â”‚   â”œâ”€â”€ commands.md               # Comandos personalizados
â”‚   â”‚   â”œâ”€â”€ prompts.md                # Prompts predefinidos
â”‚   â”‚   â””â”€â”€ hooks.json                # Hooks de automatizaciÃ³n
â”‚   â”œâ”€â”€ .ai-config/                   # ğŸ¤– ConfiguraciÃ³n universal AI
â”‚   â”‚   â”œâ”€â”€ settings.json             # Settings agnÃ³sticos
â”‚   â”‚   â”œâ”€â”€ context.md                # Contexto para otras herramientas
â”‚   â”‚   â””â”€â”€ patterns.md               # Patrones de cÃ³digo
â”‚   â”œâ”€â”€ scripts/                      # ğŸš€ Scripts maestros
â”‚   â”‚   â”œâ”€â”€ setup-workspace.sh        # Script de configuraciÃ³n completa
â”‚   â”‚   â”œâ”€â”€ start-all-services.sh     # Iniciar todos los servicios
â”‚   â”‚   â”œâ”€â”€ check-health.sh           # Verificar estado completo
â”‚   â”‚   â””â”€â”€ [otros scripts...]
â”‚   â”œâ”€â”€ templates/                    # ğŸ“„ Templates para auto-generaciÃ³n
â”‚   â”‚   â”œâ”€â”€ CLAUDE.md.template        # Template de este archivo
â”‚   â”‚   â”œâ”€â”€ README.md.template        # Template README principal
â”‚   â”‚   â””â”€â”€ [otros templates...]
â”‚   â””â”€â”€ docs/                         # ğŸ“š DocumentaciÃ³n completa
â”œâ”€â”€ level_up_backoffice/              # ğŸŒ Frontend (React + Vite) - AUTO-CLONADO
â”œâ”€â”€ ms_level_up_management/           # ğŸš€ API Backend (NestJS + GraphQL) - AUTO-CLONADO
â”œâ”€â”€ ms_trivance_auth/                 # ğŸ” Auth Service (NestJS) - AUTO-CLONADO
â””â”€â”€ trivance-mobile/                  # ğŸ“± Mobile App (React Native) - AUTO-CLONADO
```

## ğŸ¯ CONFIGURACIÃ“N CLAUDE CODE OPTIMIZADA

### Archivos de ConfiguraciÃ³n Activos
- **Settings Claude**: `./trivance-dev-config/.claude/settings.json`
- **Contexto TÃ©cnico**: `./trivance-dev-config/.claude/context.md`
- **Comandos Custom**: `./trivance-dev-config/.claude/commands.md`
- **Prompts Predefinidos**: `./trivance-dev-config/.claude/prompts.md`
- **Hooks AutomatizaciÃ³n**: `./trivance-dev-config/.claude/hooks.json`

### ConfiguraciÃ³n Multi-Repo para Claude
Claude Code debe entender que opera en un **workspace multi-repositorio** donde:

1. **5 repositorios integrados** con dependencias entre ellos
2. **Cada repo tiene tecnologÃ­as especÃ­ficas** y propÃ³sitos Ãºnicos
3. **Los cambios pueden ser cross-repo** y requieren coordinaciÃ³n
4. **Patrones de cÃ³digo unificados** definidos en `.ai-config/patterns.md`
5. **Flujo AI-FIRST** con espaÃ±ol como idioma principal

### URLs de Servicios Auto-Configurados

#### Desarrollo Local (Auto-configurado)
- **Auth Service**: http://localhost:3001
- **Management API**: http://localhost:3000
- **GraphQL Playground**: http://localhost:3000/graphql
- **Frontend Admin**: http://localhost:5173
- **Swagger Auth Docs**: http://localhost:3001/api-docs

#### QA Environment
- **Auth QA**: https://authqa.trivance.com
- **API QA**: https://apiqa.trivance.com
- **Frontend QA**: https://staging-admin.trivance.com

## ğŸš€ COMANDOS MAESTROS PARA CLAUDE CODE

### Comandos de GestiÃ³n del Workspace
```bash
# INICIAR TODO EL WORKSPACE (un comando para todo)
./trivance-dev-config/scripts/start-all-services.sh

# VERIFICAR ESTADO COMPLETO (health check integral)
./trivance-dev-config/scripts/check-health.sh

# DETENER TODOS LOS SERVICIOS
./trivance-dev-config/scripts/stop-all-services.sh

# ACTUALIZAR CONFIGURACIONES (sync desde repo config)
./trivance-dev-config/scripts/sync-configs.sh

# LINTING COMPLETO (todos los repos)
./trivance-dev-config/scripts/lint-all.sh

# TESTING COMPLETO (todos los repos)
./trivance-dev-config/scripts/test-all.sh

# BUILD COMPLETO (todos los repos)
./trivance-dev-config/scripts/build-all.sh
```

### Comandos por Environment
```bash
# Desarrollo local
./trivance-dev-config/scripts/start-all-services.sh local

# Testing QA
./trivance-dev-config/scripts/start-all-services.sh qa

# QA con mobile
./trivance-dev-config/scripts/start-all-services.sh qa mobile

# ProducciÃ³n (validaciÃ³n)
./trivance-dev-config/scripts/start-all-services.sh prod
```

### Comandos de Mantenimiento
```bash
# Actualizar todos los repositorios
./trivance-dev-config/scripts/update-all-repos.sh

# Limpiar todos los caches y builds
./trivance-dev-config/scripts/clean-all.sh

# Reinstalar todas las dependencias
./trivance-dev-config/scripts/reinstall-all.sh

# Backup de configuraciones locales
./trivance-dev-config/scripts/backup-configs.sh
```

## ğŸ—ï¸ ARQUITECTURA TÃ‰CNICA COMPLETA

### level_up_backoffice (Frontend Administrativo)
```typescript
// ğŸŒ Panel de administraciÃ³n web
// Puerto: 5173 (development)
// TecnologÃ­as:
- React 18+ con TypeScript 5.3+
- Vite (bundler + dev server)
- Redux Toolkit + RTK Query (estado global)
- Apollo Client (GraphQL)
- Tailwind CSS + Material-UI (diseÃ±o)
- Vitest (testing)

// PatrÃ³n de componentes estÃ¡ndar
interface ComponentProps {
  // Props siempre tipadas
}

export const ComponentName: React.FC<ComponentProps> = ({ prop1, prop2 }) => {
  // 1. Hooks de React primero
  // 2. Hooks de Redux/Apollo
  // 3. LÃ³gica del componente
  // 4. Efectos y callbacks
  // 5. Return JSX estructurado
}

// SeparaciÃ³n de lÃ³gica: Component.tsx + ComponentLogic.ts
```

### ms_level_up_management (API Backend Principal)
```typescript
// ğŸš€ API principal del sistema
// Puerto: 3000 (development)
// TecnologÃ­as:
- NestJS con TypeScript
- PostgreSQL + Prisma ORM
- GraphQL con Apollo Server
- REST endpoints complementarios
- JWT para autenticaciÃ³n
- Sentry para monitoreo

// PatrÃ³n de mÃ³dulos NestJS
@Module({
  imports: [TypeOrmModule.forFeature([Entity])],
  controllers: [EntityController],
  providers: [EntityService],
  exports: [EntityService]
})
export class EntityModule {}

// Implementaciones:
- PatrÃ³n CQRS
- ValidaciÃ³n con class-validator
- TransformaciÃ³n con class-transformer
- Guards para autenticaciÃ³n/autorizaciÃ³n
```

### ms_trivance_auth (Servicio de AutenticaciÃ³n)
```typescript
// ğŸ” Servicio de autenticaciÃ³n dedicado
// Puerto: 3001 (development)
// TecnologÃ­as:
- NestJS con TypeScript
- MongoDB + Mongoose
- JWT + Refresh Tokens
- bcrypt para password hashing
- Passport para estrategias de auth

// Patrones de seguridad:
- Rate limiting configurado
- ValidaciÃ³n de entrada estricta
- SanitizaciÃ³n de datos
- Logging de eventos de seguridad
- Multi-factor authentication (MFA)
```

### trivance-mobile (AplicaciÃ³n MÃ³vil)
```typescript
// ğŸ“± App mÃ³vil nativa
// TecnologÃ­as:
- React Native con Expo 53
- TypeScript para tipado completo
- React Navigation v6
- Redux Toolkit + Redux Persist
- Firebase Crashlytics
- AsyncStorage para persistencia

// PatrÃ³n de pantallas mÃ³viles
interface ScreenProps {
  navigation: NavigationProp<any>
  route: RouteProp<any>
}

export const ScreenName: React.FC<ScreenProps> = ({ navigation, route }) => {
  // 1. Hooks de Redux para estado global
  // 2. Hooks de navegaciÃ³n
  // 3. LÃ³gica especÃ­fica de la pantalla
  // 4. Manejo de estados de carga/error
  // 5. Return JSX optimizado para mÃ³vil
}
```

## ğŸ¨ PATRONES DE CÃ“DIGO UNIFICADOS

### Convenciones de Naming (EstÃ¡ndar del Equipo)
```typescript
// âœ… Variables y funciones en inglÃ©s (estÃ¡ndar internacional)
const userList = users.map(user => user.name);
const handleUserClick = (userId: string) => { ... };

// âœ… Comentarios siempre en espaÃ±ol
/**
 * Obtiene la lista de usuarios activos de la organizaciÃ³n
 * @param organizationId - ID de la organizaciÃ³n  
 * @returns Lista de usuarios activos con informaciÃ³n completa
 */
const getActiveUsers = async (organizationId: string): Promise<User[]> => {
  // Filtrar solo usuarios con estado activo y validar permisos
  return await userService.findActiveByOrganization(organizationId);
}

// âœ… Interfaces y tipos en inglÃ©s con documentaciÃ³n en espaÃ±ol
interface UserCreateRequest {
  /** Nombre completo del usuario */
  fullName: string;
  /** Email Ãºnico del usuario */
  email: string;
  /** ID de la organizaciÃ³n a la que pertenece */
  organizationId: string;
}
```

### Estructura de Commits (Conventional Commits en EspaÃ±ol)
```bash
# âœ… Usar conventional commits en espaÃ±ol
feat: agregar autenticaciÃ³n de dos factores para usuarios admin
fix: corregir error en cÃ¡lculo de comisiones de eventos
docs: actualizar documentaciÃ³n de endpoints GraphQL
style: mejorar espaciado y diseÃ±o en componente de navegaciÃ³n
refactor: simplificar lÃ³gica de validaciÃ³n de formularios
test: agregar tests unitarios para mÃ³dulo de notificaciones
perf: optimizar consultas de base de datos en reportes
chore: actualizar dependencias de seguridad
```

### Manejo de Errores Unificado
```typescript
// Frontend (React) - PatrÃ³n estÃ¡ndar
try {
  const response = await api.getUsers();
  setUsers(response.data);
  toast.success('Usuarios cargados correctamente');
} catch (error) {
  console.error('Error al obtener usuarios:', error);
  toast.error('No se pudieron cargar los usuarios. Intenta nuevamente.');
  // Log estructurado para debugging
  logger.error('getUsersError', { error: error.message, timestamp: new Date() });
}

// Backend (NestJS) - Exception Filter estÃ¡ndar
@Catch(HttpException)
export class HttpExceptionFilter implements ExceptionFilter {
  catch(exception: HttpException, host: ArgumentsHost) {
    const ctx = host.switchToHttp();
    const response = ctx.getResponse();
    const status = exception.getStatus();
    
    // Log del error en espaÃ±ol con contexto
    this.logger.error(`Error HTTP ${status}: ${exception.message}`, {
      stack: exception.stack,
      timestamp: new Date().toISOString(),
      path: ctx.getRequest().url
    });
    
    response.status(status).json({
      statusCode: status,
      timestamp: new Date().toISOString(),
      message: exception.message || 'Error interno del servidor',
      path: ctx.getRequest().url
    });
  }
}
```

## ğŸ” CONFIGURACIÃ“N DE VARIABLES DE ENTORNO

### ms_level_up_management (.env) - AUTO-GENERADO
```bash
# ConfiguraciÃ³n de la aplicaciÃ³n
NODE_ENV=development
PORT=3000
APP_NAME=Trivance Management API
APP_VERSION=1.0.0

# Base de datos PostgreSQL
DATABASE_URL=postgresql://trivance_user:trivance_password@localhost:5432/trivance_management

# AutenticaciÃ³n y seguridad
JWT_SECRET=REEMPLAZAR_CON_SECRET_SUPER_SEGURO
JWT_EXPIRATION_TIME=3600
REFRESH_TOKEN_EXPIRATION_TIME=604800

# AWS S3 para almacenamiento de archivos
AWS_ACCESS_KEY_ID=REEMPLAZAR_CON_AWS_KEY
AWS_SECRET_ACCESS_KEY=REEMPLAZAR_CON_AWS_SECRET
AWS_REGION=us-east-1
AWS_S3_BUCKET=trivance-uploads-dev

# Monitoreo y logging
SENTRY_DSN=REEMPLAZAR_CON_SENTRY_DSN
LOG_LEVEL=debug

# GraphQL configuraciÃ³n
GRAPHQL_PLAYGROUND=true
GRAPHQL_DEBUG=true
GRAPHQL_INTROSPECTION=true

# Rate limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=100

# CORS
CORS_ORIGIN=http://localhost:5173,http://localhost:3000
```

### ms_trivance_auth (.env) - AUTO-GENERADO
```bash
# ConfiguraciÃ³n de la aplicaciÃ³n
NODE_ENV=development
PORT=3001
APP_NAME=Trivance Auth Service
APP_VERSION=1.0.0

# Base de datos MongoDB
DATABASE_URL=mongodb://localhost:27017/trivance_auth

# AutenticaciÃ³n y tokens
JWT_SECRET=REEMPLAZAR_CON_SECRET_SUPER_SEGURO
JWT_EXPIRATION_TIME=3600
REFRESH_TOKEN_EXPIRATION_TIME=604800

# EncriptaciÃ³n de passwords
BCRYPT_ROUNDS=12

# Rate limiting especÃ­fico para auth
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=50

# ConfiguraciÃ³n de sesiones
SESSION_SECRET=REEMPLAZAR_CON_SESSION_SECRET
SESSION_EXPIRATION=86400

# OAuth providers (opcional)
GOOGLE_CLIENT_ID=REEMPLAZAR_SI_SE_USA_GOOGLE_AUTH
GOOGLE_CLIENT_SECRET=REEMPLAZAR_SI_SE_USA_GOOGLE_AUTH

# Monitoring
SENTRY_DSN=REEMPLAZAR_CON_SENTRY_DSN
```

### level_up_backoffice (.env.local) - AUTO-GENERADO
```bash
# URLs de APIs backend
VITE_API_URL=http://localhost:3000
VITE_AUTH_API_URL=http://localhost:3001
VITE_GRAPHQL_URL=http://localhost:3000/graphql

# ConfiguraciÃ³n de la aplicaciÃ³n
VITE_APP_NAME=Trivance Admin Panel
VITE_APP_VERSION=1.0.0
VITE_APP_DESCRIPTION=Panel administrativo de Trivance Platform

# Monitoreo frontend
VITE_SENTRY_DSN=REEMPLAZAR_CON_SENTRY_FRONTEND_DSN

# APIs externas
VITE_GOOGLE_MAPS_API_KEY=REEMPLAZAR_SI_SE_USA_GOOGLE_MAPS

# ConfiguraciÃ³n de desarrollo
VITE_DEBUG_MODE=true
VITE_MOCK_API=false
```

### trivance-mobile (.env) - AUTO-GENERADO
```bash
# URLs de APIs backend
EXPO_PUBLIC_API_URL=http://localhost:3000
EXPO_PUBLIC_AUTH_API_URL=http://localhost:3001
EXPO_PUBLIC_GRAPHQL_URL=http://localhost:3000/graphql

# ConfiguraciÃ³n del environment
EXPO_PUBLIC_ENVIRONMENT=development
EXPO_PUBLIC_APP_VERSION=1.0.0

# Firebase para notificaciones push
EXPO_PUBLIC_FIREBASE_CONFIG=REEMPLAZAR_CON_FIREBASE_CONFIG_JSON

# ConfiguraciÃ³n especÃ­fica de desarrollo
EXPO_PUBLIC_DEBUG_MODE=true
EXPO_PUBLIC_ENABLE_CRASHLYTICS=true

# APIs externas para mobile
EXPO_PUBLIC_GOOGLE_MAPS_API_KEY=REEMPLAZAR_SI_SE_USA_GOOGLE_MAPS
```

## ğŸ§ª TESTING Y CALIDAD AUTOMATIZADA

### Comandos de Testing Integrados
```bash
# Testing completo de todo el workspace
./trivance-dev-config/scripts/test-all.sh

# Testing por repositorio especÃ­fico
./trivance-dev-config/scripts/test-repo.sh level_up_backoffice
./trivance-dev-config/scripts/test-repo.sh ms_level_up_management
./trivance-dev-config/scripts/test-repo.sh ms_trivance_auth
./trivance-dev-config/scripts/test-repo.sh trivance-mobile

# Testing con cobertura completa
./trivance-dev-config/scripts/test-coverage-all.sh

# Testing end-to-end completo
./trivance-dev-config/scripts/test-e2e-all.sh
```

### EstÃ¡ndares de Calidad Configurados AutomÃ¡ticamente
```typescript
// ConfiguraciÃ³n automÃ¡tica aplicada a todos los repos:
// âœ… TypeScript strict mode activado
// âœ… ESLint + Prettier configurados uniformemente
// âœ… Pre-commit hooks instalados automÃ¡ticamente
// âœ… Husky configurado para validaciones
// âœ… Jest configurado con cobertura mÃ­nima 80%
// âœ… SonarQube rules aplicadas

// Ejemplo de test estÃ¡ndar (comentarios en espaÃ±ol)
describe('UserService - GestiÃ³n de Usuarios', () => {
  describe('createUser - CreaciÃ³n de Usuario', () => {
    it('deberÃ­a crear un usuario correctamente con datos vÃ¡lidos', async () => {
      // Preparar: datos de prueba vÃ¡lidos
      const userData: CreateUserDto = {
        fullName: 'Juan PÃ©rez GonzÃ¡lez',
        email: 'juan.perez@trivance.com',
        organizationId: 'org-123',
        role: 'admin'
      };

      // Ejecutar: llamar al servicio
      const result = await userService.createUser(userData);

      // Verificar: validar resultado esperado
      expect(result).toBeDefined();
      expect(result.id).toBeTruthy();
      expect(result.fullName).toBe(userData.fullName);
      expect(result.email).toBe(userData.email);
      expect(result.isActive).toBe(true);
      expect(result.createdAt).toBeInstanceOf(Date);
    });

    it('deberÃ­a fallar al crear usuario con email duplicado', async () => {
      // Preparar: usuario que ya existe
      const existingUser = await userService.createUser({
        fullName: 'Usuario Existente',
        email: 'existente@trivance.com',
        organizationId: 'org-123'
      });

      // Ejecutar y Verificar: debe lanzar excepciÃ³n
      await expect(
        userService.createUser({
          fullName: 'Otro Usuario',
          email: 'existente@trivance.com', // Email duplicado
          organizationId: 'org-123'
        })
      ).rejects.toThrow('El email ya estÃ¡ registrado en el sistema');
    });
  });
});
```

## ğŸ”„ WORKFLOWS DE DESARROLLO AUTOMATIZADOS

### Flujo de Nueva Feature (Guiado por IA)
```typescript
// 1. ANÃLISIS: Claude Code ayuda a definir requisitos
// Comando sugerido: "Claude, analiza los requisitos para [feature]"

// 2. DISEÃ‘O: Generar interfaces y esquemas automÃ¡ticamente
// Claude genera interfaces TypeScript basadas en patrones existentes

// 3. BACKEND: Crear endpoints siguiendo patrones establecidos
// Claude sugiere estructura de mÃ³dulos NestJS completa

// 4. FRONTEND: Implementar UI con componentes reutilizables
// Claude genera componentes React siguiendo design system

// 5. MOBILE: Adaptar funcionalidad para app mÃ³vil
// Claude adapta componentes para React Native

// 6. TESTING: Generar tests automÃ¡ticamente
// Claude crea tests unitarios y de integraciÃ³n

// 7. DOCUMENTACIÃ“N: Actualizar docs automÃ¡ticamente
// Claude actualiza documentaciÃ³n tÃ©cnica
```

### Flujo de Bug Fix (Asistido por IA)
```typescript
// 1. ANÃLISIS: Claude identifica causa raÃ­z cross-repo
// 2. REPRODUCCIÃ“N: Claude genera test que reproduce el bug
// 3. FIX: Claude implementa soluciÃ³n siguiendo patrones
// 4. VALIDACIÃ“N: Claude verifica no rompe funcionalidad existente
// 5. DEPLOY: Claude coordina deploy cross-repo si necesario
```

## ğŸš¨ TROUBLESHOOTING AUTOMATIZADO

### Comandos de DiagnÃ³stico Integrados
```bash
# DiagnÃ³stico completo del workspace
./trivance-dev-config/scripts/diagnose-workspace.sh

# Fix automÃ¡tico de problemas comunes
./trivance-dev-config/scripts/fix-common-issues.sh

# Reset completo del workspace (emergencia)
./trivance-dev-config/scripts/reset-workspace.sh

# Verificar y reparar dependencias
./trivance-dev-config/scripts/fix-dependencies.sh
```

### Soluciones a Problemas Comunes
```bash
# ğŸ”´ MongoDB no conecta
./trivance-dev-config/scripts/fix-mongodb.sh

# ğŸ”´ PostgreSQL no conecta  
./trivance-dev-config/scripts/fix-postgresql.sh

# ğŸ”´ Puertos ocupados
./trivance-dev-config/scripts/fix-ports.sh

# ğŸ”´ Node modules corruptos
./trivance-dev-config/scripts/fix-node-modules.sh

# ğŸ”´ Git issues
./trivance-dev-config/scripts/fix-git-issues.sh

# ğŸ”´ Permisos incorrectos
./trivance-dev-config/scripts/fix-permissions.sh
```

## ğŸ”§ INTEGRACIONES EXTERNAS CONFIGURADAS

### APIs de Terceros Pre-configuradas
```typescript
// âœ… AWS S3 - Almacenamiento configurado automÃ¡ticamente
// âœ… Firebase - Push notifications y crashlytics
// âœ… Brevo - Email marketing y transaccional
// âœ… ePayco - Gateway de pagos Colombia
// âœ… Wompi - Gateway de pagos alternativo
// âœ… Google Maps - GeolocalizaciÃ³n y mapas
// âœ… Sentry - Monitoreo de errores y performance
// âœ… MongoDB Atlas - Base de datos cloud (opcional)
// âœ… PostgreSQL Cloud - Base de datos cloud (opcional)

// ConfiguraciÃ³n de webhooks automÃ¡tica
@Post('webhooks/:provider')
async handleWebhook(
  @Param('provider') provider: string,
  @Body() payload: any,
  @Headers('signature') signature: string
) {
  // VerificaciÃ³n automÃ¡tica de signatures
  const isValid = this.webhookService.verifySignature(provider, payload, signature);
  
  if (!isValid) {
    this.logger.warn(`Webhook invÃ¡lido recibido de ${provider}`, { payload });
    throw new UnauthorizedException('Firma de webhook invÃ¡lida');
  }

  // Procesamiento automÃ¡tico por proveedor
  await this.webhookService.processWebhook(provider, payload);
  
  return { 
    status: 'success', 
    message: `Webhook de ${provider} procesado correctamente`,
    timestamp: new Date().toISOString()
  };
}
```

## ğŸ“Š MÃ‰TRICAS Y MONITOREO AUTOMÃTICO

### KPIs Configurados AutomÃ¡ticamente
```typescript
// ğŸ¯ Performance targets configurados:
// - API Response Time: < 200ms promedio
// - Frontend Bundle Size: < 1MB gzipped  
// - Mobile App Size: < 50MB
// - Test Coverage: > 80% en mÃ³dulos crÃ­ticos
// - Error Rate: < 0.1% en producciÃ³n
// - Uptime: > 99.9% SLA

// MÃ©tricas automÃ¡ticas con Sentry
import * as Sentry from '@sentry/node';

// Auto-configurado en todos los repos
Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: process.env.NODE_ENV === 'production' ? 0.1 : 1.0,
  integrations: [
    new Sentry.Integrations.Http({ tracing: true }),
    new Sentry.Integrations.Express({ app }),
  ]
});

// Logging estructurado automÃ¡tico
this.logger.log({
  level: 'info',
  message: 'OperaciÃ³n completada exitosamente',
  service: 'ms_level_up_management',
  operation: 'createUser',
  userId: user.id,
  organizationId: user.organizationId,
  duration: performance.now() - startTime,
  timestamp: new Date().toISOString()
});
```

## ğŸ†˜ SOPORTE Y DOCUMENTACIÃ“N INTEGRADA

### DocumentaciÃ³n Auto-Actualizada
```bash
# Toda la documentaciÃ³n se mantiene sincronizada automÃ¡ticamente:
# âœ… trivance-dev-config/docs/ONBOARDING.md - GuÃ­a completa nuevos devs
# âœ… trivance-dev-config/docs/WORKFLOWS.md - Procesos y metodologÃ­as  
# âœ… trivance-dev-config/docs/TROUBLESHOOTING.md - SoluciÃ³n problemas
# âœ… trivance-dev-config/docs/ARCHITECTURE.md - Arquitectura detallada
# âœ… Cada repo/docs/ - DocumentaciÃ³n especÃ­fica por repositorio

# Comandos para acceder a documentaciÃ³n
./trivance-dev-config/scripts/open-docs.sh           # Abrir docs en navegador
./trivance-dev-config/scripts/generate-docs.sh      # Regenerar documentaciÃ³n
./trivance-dev-config/scripts/validate-docs.sh      # Validar links y contenido
```

### Contactos y EscalaciÃ³n AutomÃ¡tica
```typescript
// Sistema de soporte integrado:
// ğŸ“ Nivel 1: DocumentaciÃ³n en trivance-dev-config/docs/
// ğŸ“ Nivel 2: Slack #dev-support (auto-notificaciÃ³n)
// ğŸ“ Nivel 3: GitHub Issues automÃ¡tico con contexto
// ğŸ“ Nivel 4: EscalaciÃ³n a tech lead con mÃ©tricas

// Auto-reporte de errores crÃ­ticos
process.on('uncaughtException', (error) => {
  logger.error('Error crÃ­tico no capturado', {
    error: error.message,
    stack: error.stack,
    timestamp: new Date().toISOString(),
    service: process.env.APP_NAME,
    environment: process.env.NODE_ENV
  });
  
  // Auto-notificaciÃ³n a Slack si es crÃ­tico
  if (process.env.NODE_ENV === 'production') {
    slackService.sendCriticalAlert({
      message: `ğŸš¨ Error crÃ­tico en ${process.env.APP_NAME}`,
      error: error.message,
      environment: process.env.NODE_ENV
    });
  }
});
```

---

## ğŸ¯ CONFIGURACIÃ“N AUTO-SINCRONIZADA

**Este archivo CLAUDE.md se auto-actualiza desde `trivance-dev-config`**

- ğŸ”„ **Auto-sincronizaciÃ³n**: Cada pull del repo config actualiza este archivo
- ğŸ¤– **Generado automÃ¡ticamente**: Por script `setup.sh`
- ğŸ“… **Ãšltima actualizaciÃ³n**: {{TIMESTAMP_PLACEHOLDER}}
- ğŸŒŸ **Optimizado para**: Claude Code en espaÃ±ol con workspace multi-repo
- ğŸ”§ **Fuente de verdad**: `trivance-dev-config/templates/CLAUDE.md.template`

**Para actualizar este archivo, edita el template en `trivance-dev-config/templates/CLAUDE.md.template` y ejecuta `./trivance-dev-config/scripts/sync-configs.sh`**
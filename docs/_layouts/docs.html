---
layout: default
---

<div class="docs-layout">

  <!-- Sidebar Navigation -->
  <aside class="docs-sidebar" role="navigation" aria-label="Documentation navigation">
    <div class="sidebar-content">

      <!-- Search Widget -->
      {%- include search.html -%}

      <!-- Documentation Sections -->
      <nav class="docs-nav">
        {%- if site.data.docs.sections -%}
          {%- for section in site.data.docs.sections -%}
            <div class="nav-section">
              <h3 class="nav-section-title">
                <a href="{{ section.url | relative_url }}"
                   class="nav-section-link"
                   style="color: {{ section.color_theme }};">
                  <span class="nav-icon nav-icon-{{ section.icon }}"></span>
                  {{ section.title }}
                </a>
              </h3>

              {%- if section.pages -%}
                <ul class="nav-pages">
                  {%- for doc_page in section.pages -%}
                    <li class="nav-page">
                      <a href="{{ section.url | append: doc_page.id | append: '/' | relative_url }}"
                         class="nav-page-link {% if page.id == doc_page.id %}current{% endif %}">
                        {{ doc_page.title }}
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </div>
          {%- endfor -%}
        {%- endif -%}
      </nav>

      <!-- External Links -->
      {%- if site.data.docs.external_links -%}
        <div class="external-links">
          <h4>Enlaces Externos</h4>
          <ul>
            {%- for link in site.data.docs.external_links -%}
              <li>
                <a href="{{ link[1].url }}" target="_blank" rel="noopener">
                  {{ link[1].label }}
                  <span class="external-icon">↗</span>
                </a>
              </li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}

    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="docs-main" role="main">
    <div class="docs-content">

      <!-- Breadcrumbs -->
      {%- if site.data.docs.navigation.show_breadcrumbs -%}
        <nav class="breadcrumbs" aria-label="Breadcrumb">
          <ol>
            <li><a href="{{ '/' | relative_url }}">Inicio</a></li>
            {%- if page.category -%}
              <li><a href="/{{ page.category }}/">{{ page.category | capitalize }}</a></li>
            {%- endif -%}
            <li aria-current="page">{{ page.title }}</li>
          </ol>
        </nav>
      {%- endif -%}

      <!-- Page Header -->
      <header class="page-header">
        <h1 class="page-title">{{ page.title | default: "Documentación" }}</h1>

        {%- if page.description or page.excerpt -%}
          <p class="page-description">{{ page.description | default: page.excerpt }}</p>
        {%- endif -%}

        <!-- Page Meta -->
        <div class="page-meta">
          {%- if page.category -%}
            <span class="page-category">
              <span class="meta-label">Categoría:</span>
              <span class="category-badge category-{{ page.category }}">{{ page.category | capitalize }}</span>
            </span>
          {%- endif -%}

          {%- if page.tags and page.tags.size > 0 -%}
            <div class="page-tags">
              <span class="meta-label">Tags:</span>
              {%- for tag in page.tags -%}
                <span class="tag-badge">{{ tag }}</span>
              {%- endfor -%}
            </div>
          {%- endif -%}

          {%- if page.last_modified_at or page.date -%}
            <div class="page-updated">
              <span class="meta-label">Última actualización:</span>
              <time datetime="{{ page.last_modified_at | default: page.date | date_to_xmlschema }}">
                {{ page.last_modified_at | default: page.date | date: "%d de %B, %Y" }}
              </time>
            </div>
          {%- endif -%}

          {%- if site.data.docs.content.reading_time -%}
            <div class="reading-time">
              <span class="meta-label">Tiempo de lectura:</span>
              <span class="reading-time-value">{{ content | reading_time | default: "5 min" }}</span>
            </div>
          {%- endif -%}
        </div>
      </header>

      <!-- Table of Contents (for long content) -->
      {%- if page.toc != false and content contains '<h2' -%}
        <details class="table-of-contents" open>
          <summary>Contenido</summary>
          <div class="toc-content" id="toc">
            <!-- TOC will be generated by JavaScript -->
          </div>
        </details>
      {%- endif -%}

      <!-- Main Content -->
      <article class="docs-article">
        {{ content }}
      </article>

      <!-- Page Navigation -->
      <nav class="page-navigation" aria-label="Navegación de páginas">
        {%- comment -%}
        This would ideally be populated with previous/next page logic
        based on the docs.yml structure
        {%- endcomment -%}

        {%- if page.previous or page.next -%}
          <div class="nav-links">
            {%- if page.previous -%}
              <a href="{{ page.previous.url | relative_url }}" class="nav-link nav-prev">
                <span class="nav-direction">← Anterior</span>
                <span class="nav-title">{{ page.previous.title }}</span>
              </a>
            {%- endif -%}

            {%- if page.next -%}
              <a href="{{ page.next.url | relative_url }}" class="nav-link nav-next">
                <span class="nav-direction">Siguiente →</span>
                <span class="nav-title">{{ page.next.title }}</span>
              </a>
            {%- endif -%}
          </div>
        {%- endif -%}
      </nav>

      <!-- Feedback Section -->
      <footer class="page-footer">
        <div class="page-feedback">
          <h4>¿Esta página fue útil?</h4>
          <p>
            <a href="{{ site.data.docs.external_links.github.url }}/issues/new?title=Feedback: {{ page.title | uri_escape }}&body=Página: {{ page.url | absolute_url | uri_escape }}"
               target="_blank" rel="noopener">
              Enviar feedback
            </a>
          </p>
        </div>

        {%- if page.contributors -%}
          <div class="page-contributors">
            <h4>Contribuidores</h4>
            <ul>
              {%- for contributor in page.contributors -%}
                <li>{{ contributor }}</li>
              {%- endfor -%}
            </ul>
          </div>
        {%- endif -%}
      </footer>

    </div>
  </main>

</div>

<!-- JavaScript for enhanced functionality -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Generate Table of Contents
    const tocContainer = document.getElementById('toc');
    if (tocContainer) {
      const headings = document.querySelectorAll('.docs-article h2, .docs-article h3, .docs-article h4');

      if (headings.length > 0) {
        const tocList = document.createElement('ul');

        headings.forEach((heading, index) => {
          // Create anchor link if it doesn't exist
          if (!heading.id) {
            heading.id = 'heading-' + index;
          }

          const listItem = document.createElement('li');
          listItem.className = 'toc-item toc-' + heading.tagName.toLowerCase();

          const link = document.createElement('a');
          link.href = '#' + heading.id;
          link.textContent = heading.textContent;
          link.className = 'toc-link';

          listItem.appendChild(link);
          tocList.appendChild(listItem);
        });

        tocContainer.appendChild(tocList);
      } else {
        // Hide TOC if no headings
        const tocDetails = document.querySelector('.table-of-contents');
        if (tocDetails) {
          tocDetails.style.display = 'none';
        }
      }
    }

    // Highlight current section in TOC while scrolling
    const tocLinks = document.querySelectorAll('.toc-link');
    const headingElements = document.querySelectorAll('.docs-article h2, .docs-article h3, .docs-article h4');

    if (tocLinks.length > 0 && headingElements.length > 0) {
      function updateTOCHighlight() {
        let current = '';

        headingElements.forEach(heading => {
          const rect = heading.getBoundingClientRect();
          if (rect.top <= 100) {
            current = heading.id;
          }
        });

        tocLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === '#' + current) {
            link.classList.add('active');
          }
        });
      }

      window.addEventListener('scroll', updateTOCHighlight);
      updateTOCHighlight(); // Initial call
    }

    // Copy code blocks functionality
    const codeBlocks = document.querySelectorAll('pre code');
    codeBlocks.forEach(block => {
      const button = document.createElement('button');
      button.className = 'copy-code-btn';
      button.textContent = 'Copiar';
      button.setAttribute('aria-label', 'Copiar código');

      button.addEventListener('click', () => {
        navigator.clipboard.writeText(block.textContent).then(() => {
          button.textContent = '¡Copiado!';
          setTimeout(() => {
            button.textContent = 'Copiar';
          }, 2000);
        });
      });

      const pre = block.parentElement;
      pre.style.position = 'relative';
      pre.appendChild(button);
    });
  });
</script>
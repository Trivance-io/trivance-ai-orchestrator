<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'es' }}">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {%- seo -%}

  <link rel="stylesheet" href="{{ '/assets/css/docs.css' | relative_url }}">

  {%- feed_meta -%}

  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}

  <!-- Preload critical resources -->
  <link rel="preload" href="{{ '/assets/css/docs.css' | relative_url }}" as="style">
  <link rel="preload" href="{{ '/assets/js/search.js' | relative_url }}" as="script">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ '/assets/favicon.ico' | relative_url }}">
</head>

<body class="{{ page.layout | default: 'default' }}-layout">

  {%- include nav.html -%}

  <main class="page-content" aria-label="Content">
    <div class="wrapper">
      {{ content }}
    </div>
  </main>

  {%- include footer.html -%}

  <!-- Search functionality -->
  <script src="{{ '/assets/js/search.js' | relative_url }}" defer></script>

  <!-- Mobile menu functionality -->
  <script>
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
      const mobileMenuToggle = document.querySelector('[data-mobile-menu-toggle]');
      const mobileNav = document.querySelector('[data-mobile-nav]');

      if (mobileMenuToggle && mobileNav) {
        mobileMenuToggle.addEventListener('click', function() {
          const isExpanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';

          mobileMenuToggle.setAttribute('aria-expanded', !isExpanded);
          mobileNav.classList.toggle('nav-open');

          // Toggle hamburger animation
          mobileMenuToggle.classList.toggle('active');
        });

        // Close mobile menu on escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && mobileNav.classList.contains('nav-open')) {
            mobileMenuToggle.click();
          }
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
          if (!mobileNav.contains(e.target) && !mobileMenuToggle.contains(e.target)) {
            if (mobileNav.classList.contains('nav-open')) {
              mobileMenuToggle.click();
            }
          }
        });
      }

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });

      // Add focus styles for keyboard navigation
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Tab') {
          document.body.classList.add('keyboard-nav');
        }
      });

      document.addEventListener('click', function() {
        document.body.classList.remove('keyboard-nav');
      });
    });
  </script>

</body>

</html>